# День 05

## Упражнение 00

Пожалуйста, создайте простой индекс BTree для каждого внешнего ключа в нашей базе данных. Шаблон имени должен удовлетворять следующему правилу "idx_{table_name}_{column_name}". Например, именной BTree-индекс для столбца pizzeria_id в таблице `menu` будет `idx_menu_pizzeria_id`.


## Упражнение 01

Перед дальнейшими действиями напишите SQL-запрос, который возвращает названия пицц и соответствующих пиццерий. Пожалуйста, посмотрите на пример результата ниже (сортировка не требуется).

| имя_пиццы | имя_пиццерии | 
| ------ | ------ |
| пицца с сыром | Pizza Hut |
| ... | ... |

Приведем доказательство того, что ваши индексы работают для вашего SQL.
Образцом доказательства является вывод команды `EXPLAIN ANALYZE`. 


## Упражнение 02

Пожалуйста, создайте функциональный индекс B-Tree с именем `idx_person_name` для столбца name таблицы `person`. Индекс должен содержать имена людей в верхнем регистре. 

Напишите и предоставьте любой SQL с доказательством (`EXPLAIN ANALYZE`) того, что индекс idx_person_name работает. 


## Упражнение 03

Пожалуйста, создайте лучший многоколоночный индекс B-Tree с именем `idx_person_order_multi` для приведенного ниже SQL-запроса.

    SELECT person_id, menu_id, order_date
    FROM person_order
    WHERE person_id = 8 AND menu_id = 19;


Команда `EXPLAIN ANALYZE` должна вернуть следующий шаблон. Пожалуйста, будьте внимательны при сканировании "Index Only Scan"!

    Index Only Scan using idx_person_order_multi on person_order ...

Пожалуйста, предоставьте любой SQL с доказательством (`EXPLAIN ANALYZE`) того, что индекс `idx_person_order_multi` работает. 


## Упражнение 04

Пожалуйста, создайте уникальный индекс BTree с именем `idx_menu_unique` в таблице `menu` для столбцов `pizzeria_id` и `pizza_name`. 
Пожалуйста, напишите и предоставьте любой SQL с доказательством (`EXPLAIN ANALYZE`), что индекс `idx_menu_unique` работает


## Упражнение 05

Пожалуйста, создайте частично уникальный индекс BTree с именем `idx_person_order_order_date` на таблице `person_order` для атрибутов `person_id` и `menu_id` с частичной уникальностью для столбца `order_date` для даты '2022-01-01'.


## Упражнение 06

Создайте новый индекс BTree с именем `idx_1`, который должен улучшить метрику "Время выполнения" этого SQL. Пожалуйста, предоставьте доказательство (`EXPLAIN ANALYZE`) того, что SQL был улучшен.
